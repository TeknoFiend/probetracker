<div class="date_label"></div>

<div class="space">
</div>

<div class="control_bar">
  <button data-control-type="play" data-toggled-text="Stop" autocomplete="off">Play</button>
  <div class="year_slider"></div>
</div>

<script>
function setUniverseToDate( year, day )
{
   $('.date_label').html( year );
   move_planets( year, day );
}


function setUniverseToDay( the_day )
{
   year = Math.floor( the_day / SolarSystem.days_per_year ) + SolarSystem.initial_date.year
   day = (the_day % SolarSystem.days_per_year) + SolarSystem.initial_date.day
   setUniverseToDate( year, day );
}


$(function() {

  var slider = $(".control_bar .year_slider").slider({
    min: 1,
    max: Math.floor( SolarSystem.total_days() ),
    slide: function(event, ui) {
       setUniverseToDay( ui.value );
    }
  });

  var animation_id = null;
  $('button[data-control-type="play"]').click( function() {
    if( $(this).html() != $(this).attr('data-toggled-text') ) {
       animation_id = setInterval( function() {
          slider.slider('value', slider.slider('value') + 10 );
          setUniverseToDay( slider.slider('value') );
       }, 100);

       $(this).attr('data-normal-text', $(this).html() );
       $(this).html( $(this).attr('data-toggled-text') );
    }
    else {
       clearInterval( animation_id );
       animation_id = null;
       $(this).html( $(this).attr('data-normal-text') );
    }
  });

  StartUniverse();
  setUniverseToDate( SolarSystem.initial_date.year, SolarSystem.initial_date.day );
});
</script>
